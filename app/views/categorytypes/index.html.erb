<!DOCTYPE html>
<html>
	<head>
	<title>Category Types</title>
	<script>
			$(document).ready(function() 
			{			
					$( "#dialog-form" ).dialog({
						dialogClass: "no-close",
				      autoOpen: false,
				      height: 300,
				      width: 500,
				      modal: true,
			    	});
			 
				    $("#btnClose").click(function()
				    {
				    	$("#dialog-form").dialog("close");
				
				    });
				    
			 		$('.ui-dialog-buttonpane').find('button').css('visibility','hidden');
					
					$("#btnNew").click(function() 
				    {
					        $( "#dialog-form" ).dialog( "open" );
					        //$("#newdialog").attr('src','http://0.0.0.0:3000/provinces/new?mode=new');
					        <% if params[:page].nil? %> 
					        $("#newdialog").attr('src','<%=new_categorytype_url%>?mode=new');
					        <% else %>
					        $("#newdialog").attr('src','<%=new_categorytype_url%>?mode=new&page=<%=params[:page]%>');
					        <% end %>
					});
			});
			
			//updating the data
			function updateData(mode,data,rowid)
			{
				if (mode=="new")
				{
					// $(".dataTable > tbody:last").append(data);
					$(".dataTable > tbody:last").replaceWith(data);
				}
				else
				{
				$("#" + rowid).replaceWith(data);
				}

			}			
	</script>
	</head>
	<body>
		<%= form_tag({:action => "searchOrdelete"}, remote: true) do %>
		<section id="tbar">
			<input type="button" id="btnNew" value="New">
			<input type="submit" id="bntDelete" name="btnDelete" value="Delete" onclick="return deleteRows();">
			<input type="button" id="btnSearch" value="Search">
			<input type="button" id="btnClose" value="Close" style='display:none;visibility: hidden'/>
		</section>
		<table class="dataTable">
			<thead>
				<tr>
					<th style="width:1%"><input type="checkbox" id="chkAll"/></th>
					<th style="width:55%">Name</th>
					<th style="width:30%">Created</th>
					<th style="width:10%">Status</th>
					<th style="width:2%"></th>
				</tr>
			</thead>
			<thead>
				<tr>
					<th></th>
					<th><input type="text" id="txtName" style="width:99%"/></th>
					<th><input type="text" id="txtCreated" style="width:99%"/></th>
					<th><input type="text" id="txtStatus" style="width:99%"/></th>
					<th></th>
				</tr>
			</thead>
			<tbody>
				<% @Categorytypes.each do |c| %>
				<tr>
					<td><input type="checkbox" id="r<%=c.id%>" name="ps[]"/></td>
					<td><%=c.name %></td>
					<td><% if !c.created_at.nil?  %>
						<%=c.created_at.strftime('%Y-%m-%d')%>
						<% end %>
					</td>
					<% if c.status.nil? %>
					<td>Active</td>
					<% else %>
					<td>Inactive</td>
					<% end %>
					<td><img src="assets/delete.png" /></td>
				</tr>
				<% end %>
			</tbody>
			<tfoot>
				<tr>
					<td colspan="3">
						<%= will_paginate @Categorytypes %>
					</td>
					<td colspan="2">
						<%=Categorytype.count%> Records
					</td>
				</tr>
			</tfoot>
		</table>
		<!-- dialog start -->
		<div id="dialog-form" title="New category type">
			<iframe id="newdialog" name="newdialog" seamless="seamless" frameborder="0" height="100%" width="100%" scrolling="no"> 
		    </iframe>
		</div>
		<% end %>
		<!-- new dialog end -->
	</body>
</html>