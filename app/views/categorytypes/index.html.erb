<!DOCTYPE html>
<html>
	<head>
	<title>Category Types</title>
	<script>
			$(document).ready(function() 
			{			
					/* selecting the row */
					// $('.dataTable input[type=checkbox]').click(function(event)
					// {
						// alert('checkbox click');
						// event.stopPropagation()
					// });
					alert('ready');
					$('.dataTable tbody tr:not(.filterOut)').click(function(){
						var col = $(this).parent().children().index($(this));
						if(col!=1) 
						{
							alert('tr click');
            			alert(this.id);
              			alert($(this).attr('id'));
						}
						
            		});
				
					$('.pagination a').attr('data-remote', 'true')
					$( "#dialog-form" ).dialog({
						dialogClass: "no-close",
				      autoOpen: false,
				      height: 300,
				      width: 500,
				      modal: true,
			    	});
			 
				    $("#btnClose").click(function()
				    {
				    	$("#dialog-form").dialog("close");
				
				    });
				    
			 		$('.ui-dialog-buttonpane').find('button').css('visibility','hidden');
					
					$("#btnNew").click(function() 
				    {
					        $( "#dialog-form" ).dialog( "open" );
					        page = $("#page").val();
					        $("#newdialog").attr('src','<%=new_categorytype_url%>?mode=new&page='+page);
					});
			});
			
			//updating the data
			function updateData(mode,data,rowid)
			{
				if (mode=="new")
				{
					// $(".dataTable > tbody:last").append(data);
					$("#categorytypes").html(data);
					$('.pagination a').attr('data-remote', 'true');
				}
				else
				{
					alert('mode edit');
				$("#" + rowid).replaceWith(data);
				}

			}			
	</script>
	</head>
	<body>
		<%= form_tag({:action => "searchOrdelete"}, remote: true) do %>
		<section id="tbar">
			<input type="button" id="btnNew" value="New">
			<input type="submit" id="bntDelete" name="btnDelete" value="Delete" onclick="return deleteRows();">
			<input type="button" id="btnSearch" value="Search">
			<input type="button" id="btnClose" value="Close" style='display:none;visibility: hidden'/>
			<input type="text" id="page" name="page" value="<%=@page%>" style='display: none;visibility: hidden;'/>
			<input type="text" id="mode" name="mode" value="<%=@mode%>" style='display: none;visibility: hidden'/>
		</section>
		<div id="categorytypes">
			<%= render :partial => 'shared/categorytype' %>
		</div>
		<!-- dialog start -->
		<div id="dialog-form" title="New category type">
			<iframe id="newdialog" name="newdialog" seamless="seamless" frameborder="0" height="100%" width="100%" scrolling="no"> 
		    </iframe>
		</div>
		<% end %>
		<!-- new dialog end -->
	</body>
</html>